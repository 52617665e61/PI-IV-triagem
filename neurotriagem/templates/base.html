{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Meu App{% endblock %}</title>

    {% block css %}{% endblock %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    
</head>

<body>

    <!-- NAVBAR -->
    <div>
        <nav class="head">
            <!-- Ícone Home -->
            <a href="/" class="nav-icon-left">
                <img src="{% static 'img/home-icon.png' %}" alt="Home">
            </a>

            {% if not user.is_authenticated %}
                <!-- Navbar para visitantes -->
                <div class="navbar-left">
                    <a href="/" class="nav-link">Página Inicial</a>
                    <a href="{% url 'pages:servicos'%}" class="nav-link">Serviços</a>
                    <a href="{% url 'pages:quem_somos' %}" class="nav-link">Quem Somos</a>
                </div>
                <div class="navbar-right">
                    <a href="{% url 'registro_escolha' %}" class="register-btn">Registrar-se</a>
                    <a href="{% url 'login' %}" class="login-btn">Login</a>
                </div>

            {% elif is_paciente %}
                <!-- Navbar para Pacientes -->
                <div class="dropdown">
                    <button class="nav-btn" onclick="toggleDropdown(this)">Testes <span class="arrow"></span></button>
                    <div class="dropdown-content">
                        <a href="{% url 'Triagem:triagem' 'autismo' %}">Autismo</a>
                        <a href="#">Ansiedade</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="nav-btn" onclick="toggleDropdown(this)">Resultados <span class="arrow"></span></button>
                    <div class="dropdown-content">
                        <a href="#">Últimos</a>
                        <a href="#">Todos</a>
                    </div>
                </div>

            {% elif is_psicologo %}
                <!-- Navbar para Psicólogos -->
                <div class="dropdown">
                    <button class="nav-btn" onclick="toggleDropdown(this)">Dashboards <span class="arrow"></span></button>
                    <div class="dropdown-content">
                        <a href="{% url 'analytics:visao_geral' %}">Visão Geral</a>
                        <a href="#">Por Paciente</a>
                    </div>
                </div>
                <div class="dropdown">
                    <button class="nav-btn" onclick="toggleDropdown(this)">Pacientes <span class="arrow"></span></button>
                    <div class="dropdown-content">
                        <a href="{% url 'analytics:pacients_list' %}">Lista</a>
                        <a href="#">Adicionar</a>
                    </div>
                </div>

            {% elif is_admin_user %}
                <!-- Navbar para Administrador -->
                <div class="dropdown">
                    <button class="nav-btn" onclick="toggleDropdown(this)">Administração <span class="arrow"></span></button>
                    <div class="dropdown-content">
                        <a href="#">Usuários</a>
                        <a href="#">Relatórios</a>
                    </div>
                </div>
            {% endif %}

            {% if user.is_authenticated %}
                <!-- Ícone do usuário -->
                <div class="dropdown nav-icon-right">
                    <img src="{% static 'img/user-icon.png' %}" alt="Usuário" class="user-avatar" onclick="toggleDropdown(this)">
                    <div class="dropdown-content user-menu">
                        <a href="#">Perfil</a>
                        <a href="#">Configurações</a>
                        <a href="#" onclick="handleLogout(); return false;">Logout</a>
                    </div>
                </div>
            {% endif %}
        </nav>
    </div>

    
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- FORMULÁRIO INVISÍVEL PARA LOGOUT -->
    <form id="logout-form" method="post" action="{% url 'logout' %}" style="display: none;">
        {% csrf_token %}
    </form>

    <script src="{% static 'js/dropdown.js' %}" defer></script>

    {% block js %}{% endblock %}

</body>
</html>
